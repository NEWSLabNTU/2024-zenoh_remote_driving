launch:
  - arg:
      name: vehicle_ip
      default: 192.168.10.101


  - arg:
      name: video_port
      default: "8080"

  - arg:
      name: zenoh_port
      default: "8001"

  - arg:
      name: vehicle_model
      default: f1eighth_vehicle

  - arg:
      name: sensor_model
      default: f1eighth_sensor_kit

  # Run the Zenoh bridge
  - executable:
      cmd: zenoh-bridge-ros2dds -l tcp/$(var vehicle_ip):8001
      output: screen
      launch-prefix: env RUST_LOG=warn

  # Run the video transmitter
  - executable:
      cmd: ffmpeg -hwaccel cuda -f v4l2 -input_format mjpeg -framerate 30 -video_size 1920x1080 -i /dev/video0 -tune zero_latency -vf "drawtext=text='%{localtime\:%Y-%m-%d %H\\\\\:%M\\\\\:%S}.%{eif\:(1000 * (t - floor(t)))\:d}':x=10:y=10:fontsize=24:fontcolor=black" -f mpegts tcp://$(var vehicle_ip):$(var video_port)?connect
      output: screen
      launch-prefix: env RUST_LOG=warn

  # Run the remote controller
  - node:
      pkg: remote_control
      exec: remote_control
      name: remote_control
      name: remote_control
      args:  -l tcp/$(var vehicle_ip):8002
      output: screen


  # Run Autoware
  - include:
      file: "$(find-pkg-share autoware_launch)/launch/autoware.launch.xml"
      arg:
      -
        name: vehicle_model
        value: $(var vehicle_model)
      -
        name: sensor_model
        value: $(var sensor_model)
      -
        name: map_path
        value: ./data/COSS-map-planning
      -
        name: launch_vehicle
        value: "false"
      -
        name: launch_system
        value: "false"
      -
        name: launch_map
        value: "false"
      -
        name: launch_sensing
        value: "false"
      -
        name: launch_sensing_driver
        value: "false"
      -
        name: launch_localization
        value: "false"
      -
        name: launch_perception
        value: "false"
      -
        name: launch_planning
        value: "false"
      -
        name: launch_control
        value: "false"
      -
        name: rviz
        value: "false"
